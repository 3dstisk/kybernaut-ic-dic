!function(o){var i="";function l(l){switch(woolab.ares_fill&&(o(".woolab-ic-dic-tip").remove(),e()),l){case"SK":o("#billing_dic_dph_field").show();break;case"CZ":o("#billing_dic_dph_field").hide(),woolab.ares_check&&(t(a=o("#billing_ic")),a.bind("focusin",function(){i=a.val()}),a.donetyping(function(){a.val()!==i&&t(a)},500));break;default:o("#billing_dic_dph_field").hide()}var a}function a(o){o.removeClass("kbnt-wrong").removeClass("woocommerce-invalid")}function n(o){o.addClass("kbnt-wrong").addClass("woocommerce-invalid").removeClass("woocommerce-validated")}function e(){o("#billing_company").removeAttr("readonly"),o("#billing_dic").removeAttr("readonly"),o("#billing_postcode").removeAttr("readonly"),o("#billing_city").removeAttr("readonly"),o("#billing_address_1").removeAttr("readonly")}function t(l){var t=l.val();if(t!==i){console.log(t);var r=o("#billing_ic_field"),d='<span role="alert" class="woolab-ic-dic-tip">'+woolab.l18n_not_valid+"</span>";o(".woolab-ic-dic-tip").remove(),a(r),r.removeClass("kbnt-ok").removeClass("woocommerce-validated"),7!=t.length&&8!=t.length||null==t.match(/^[0-9]+$/)?(e(),t.length>0?n(r):a(r)):o.ajax({url:woolab.ajaxurl,data:{action:"ajaxAres",ico:t},beforeSend:function(){r.addClass("kbnt-validating"),r.append('<span role="info" class="woolab-ic-dic-tip">'+woolab.l18n_validating+"</span>")},success:function(i){(r.removeClass("kbnt-validating"),i)?0==(i=JSON.parse(i)).error?(o(".woolab-ic-dic-tip").remove(),r.addClass("kbnt-ok").addClass("woocommerce-validated").removeClass("woocommerce-invalid"),woolab.ares_fill&&(o("#billing_company").val(i.spolecnost).attr("readonly",!0),o("#billing_dic").val(i.dic).attr("readonly",!0),o("#billing_address_1").val(i.adresa).attr("readonly",!0),o("#billing_postcode").val(i.psc).attr("readonly",!0),o("#billing_city").val(i.mesto).attr("readonly",!0),r.append('<span role="info" class="woolab-ic-dic-tip">'+woolab.l18n_ok+"</span>"),o("body").trigger("update_checkout"))):(c(r),o(".woolab-ic-dic-tip").length>0&&o(".woolab-ic-dic-tip").remove(),e(),r.append('<span role="alert" class="woolab-ic-dic-tip error">'+i.error+"</span>")):(c(r),0==o(".woolab-ic-dic-tip").length&&(e(),r.append(d)))},error:function(i){0==o(".woolab-ic-dic-tip").length&&(l.val(""),c(r),r.append('<span role="alert" class="woolab-ic-dic-tip error">'+woolab.l18n_error+"</span>"))}}),i=l.val()}}function c(i){woolab.ares_fill&&(o("#billing_company").val(""),o("#billing_dic").val(""),o("#billing_postcode").val(""),o("#billing_city").val(""),o("#billing_address_1").val(""),e()),n(i)}o.fn.extend({donetyping:function(i,l){l=l||1e3;var a,n=function(o){a&&(a=null,i.call(o))};return this.each(function(i,e){var t=o(e);t.is(":input")&&t.on("keyup keypress paste",function(o){"keyup"==o.type&&8!=o.keyCode||(a&&clearTimeout(a),a=setTimeout(function(){n(e)},l))}).on("blur",function(){n(e)})})}}),o(document).ready(function(){l(o("#billing_country").val()),o("body").bind("country_to_state_changing",function(o,i,a){l(i)}),o(".woolab-ic-dic-no_spaces input").bind("input",function(){o(this).val(function(o,i){return i.replace(/\s+/g,"")})})})}(jQuery);